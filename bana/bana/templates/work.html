{% extends './layouts/base.html' %}

{% block title %}How it works - BanaCommunity{% endblock %}

{% block content %}
{% load static %}
<div class="min-h-screen flex flex-col items-center">
    <div class="flex flex-col-reverse md:flex-row items-center w-full h-[90vh] md:h-screen my-8 md:my-0"
        style="background-image: url('{% static 'bana/img/background/Background_Bana.jpg' %}'); background-size: cover; background-position: center;">

        <!-- Left Content -->
        <div class="flex flex-col items-center text-center md:text-left px-8 pb-4 md:mb-4 md:w-1/2 md:px-16 xl:px-32">
            <h1 class="mt-4 text-4xl md:text-5xl font-bold">Discover how it works</h1>
            <h2 class="mt-2 mb-4 text-lg font-semibold text-brand">A community that helps each other</h2>
            <div class="mt-6 flex flex-col xl:flex-row gap-4 items-center">
                <a href="/find-ride" class="w-60 md:w-48 px-6 py-3 font-semibold text-white bg-brand rounded-full"
                    aria-label="Find a ride">Find a ride</a>
                <a href="/offer-ride" class="w-60 md:w-48 px-6 py-3 font-semibold text-white bg-brand-200 rounded-full"
                    aria-label="Offer a ride">Offer a ride</a>
            </div>
        </div>

        <!-- Right Content -->
        <div class="relative w-full md:w-1/2 h-full overflow-hidden">
            <!-- Right Side Background (Hidden on small screens) -->
            <div
                class="absolute top-0 right-[-20%] hidden md:flex w-full h-full items-center justify-center bg-brand-50 rounded-l-full overflow-hidden">
                <img src="{% static 'bana/img/background/Bana_background_lime.png' %}" alt="Background"
                    class="absolute w-full h-full object-cover opacity-70">
            </div>

            <!-- Circular Image Container (Responsive Size) -->
            <div
                class="absolute left-1/2 md:left-0 top-1/2 w-80 h-80 max-w-full max-h-full transform -translate-x-1/2 md:translate-x-0 -translate-y-1/2 rounded-full overflow-hidden">
                <img src="{% static 'bana/img/page/Bana_work_vonecia_carswell.jpg' %}" alt="Family Cooking"
                    class="w-full h-full object-cover">
            </div>
        </div>
    </div>

    <!-- Benefits Section -->
    <div class="bg-brand md:h-[12rem] w-full flex flex-col md:flex-row relative overflow-hidden">

        <div class="hidden xl:block h-full">
            <img class="h-full w-full object-cover" src="{% static 'bana/img/other/Bana_circle_right.png' %}"
                alt="Circle with logo Bana">
        </div>

        <div class="h-[1/2] block md:hidden">
            <img class="object-cover" src="{% static 'bana/img/other/Bana_circle_bottom.png' %}"
                alt="Circle with logo Bana">
        </div>

        <!-- Right Section -->
        <div
            class="h-auto w-full flex-1 flex flex-col gap-6 md:flex-row items-center justify-between md:py-6 md:px-20 text-white">

            <!-- Benefit Items -->
            {% for step in work_steps %}
            <div
                class="flex flex-col text-center px-16 md:!px-0 items-center mb-4 md:!mb-0 md:items-start md:w-[20%] md:!text-left">
                <img class="w-12 h-18 mb-2" src="{% static step.img_src %}" alt="{{ step.title }} feature icon">
                <h3 class="text-lg font-bold">{{ step.title }}</h3>
                <p class="text-sm">Join a <span class="text-brand-50 font-semibold">{{ step.highlight }}</span>
                    {{ step.description }}</p>
            </div>
            {% endfor %}

        </div>
    </div>

    <div class="flex flex-col items-center gap-6 md:flex-row md:justify-center md:gap-8 md:mt-12">
        <div class="w-full p-6 md:w-1/2">
            <div class="relative w-full">
                <!-- Tablet Frame (Ensures it's on top) -->
                <img src="{% static 'bana/img/other/tablet.png' %}" alt="Tablet Frame"
                    class="w-full relative z-20 pointer-events-none">

                <!-- Video Element (Hidden Initially) -->
                <video id="video-element" class="absolute top-0 left-0 w-auto h-full hidden z-0 px-2 md:px-8" controls>
                    <source src="{% static 'bana/video/how_it_works.mp4' %}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

                <!-- Video Thumbnail & Play Button -->
                <div id="video-container"
                    class="absolute top-0 left-0 w-full h-full flex items-center justify-center cursor-pointer z-10">
                    <img src="{% static 'bana/img/other/video-thumbnail.avif' %}" alt="Video Thumbnail"
                        class="w-full h-full object-cover">

                    <!-- Play Button -->
                    <div class="absolute">
                        <img src="{% static 'bana/img/icon/Icon_play.svg' %}" alt="Play Button"
                            class="w-16 h-16 md:w-32 h-32">
                    </div>
                </div>
            </div>
        </div>

        <div class="w-full p-6 md:w-auto">
            <div>
                <h3 class="text-xl text-center md:text-left font-bold text-brand mb-2">
                    Discover how it works in 30 seconds!
                </h3>
            </div>
            <div class="flex flex-col items-center gap-4 mt-6 text-center md:flex-row">
                <a href="/find-ride" class="w-60 px-6 py-3 font-semibold text-white bg-brand rounded-full md:w-48"
                    aria-label="Find a ride">Find a ride</a>
                <a href="/offer-ride" class="w-60 px-6 py-3 font-semibold text-white bg-brand-200 rounded-full md:w-48"
                    aria-label="Offer a ride">Offer a ride</a>
            </div>
        </div>
    </div>

    <div class="flex flex-col items-center gap-8 pt-8 pb-8 md:flex-row md:justify-around md:my-12">

        {% for role in work_roles %}
        <div class="flex flex-col items-center">
            <img src="{% static role.img_src %}" alt="{{ role.alt_text }}" class="w-50 h-50">
            <a href="{{ role.link_url }}" class="mt-2 hover:no-underline drop-shadow-lg">
                <p class="font-bold text-brand">{{ role.link_text }}</p>
            </a>
        </div>
        {% endfor %}

    </div>

    <div class="w-full flex flex-col items-center p-8 bg-cover bg-center"
        style="background-image: url('{% static 'bana/img/background/Bana_background_dark_green.png' %}');">

        <div class="text-center">
            <h3 class="text-xl font-bold text-white md:text-2xl">
                <span class="text-brand-50">They trust us</span>
            </h3>
        </div>
    </div>

    <div class="carousel-container flex items-center justify-center w-full h-1/2 p-4 overflow-hidden">
        <div class="relative flex items-center w-full md:w-3/4">
            <!-- Left Button -->
            <button
                class="prev absolute left-2 md:left-0 z-10 flex items-center justify-center w-8 h-8 md:w-16 md:h-16 p-4 text-white bg-brand rounded-full shadow-lg transform -translate-x-1/2"
                onclick="plusDivs(-1)">
                ❮
            </button>

            <!-- Slides Container -->
            <div class="relative w-full overflow-hidden">
                <div id="carousel1"
                    class="carousel flex w-full transition-transform duration-500 ease-in-out pointer-events-none">
                    {% for profile in work_profiles %}
                    <div
                        class="mySlides flex flex-col items-center w-full p-8 text-center flex-shrink-0 gap-24 xl:flex-row xl:!text-left pointer-events-auto">
                        <img src="{% static profile.img_src %}"
                            class="object-cover w-40 h-40 rounded-full md:w-96 md:h-96 md:ml-16" alt="Profile">
                        <div class="mx-4 md:mr-16 max-w-lg">
                            <h2 class="text-2xl font-bold text-brand">{{ profile.name }}</h2>
                            <p class="text-sm font-semibold text-brand">
                                {{ profile.short_bio }}
                            </p><br>
                            <p class="text-sm text-gray-700">
                                {{ profile.full_description }}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Right Button -->
            <button
                class="next absolute right-2 md:right-0 z-10 flex items-center justify-center w-8 h-8 md:w-16 md:h-16 p-4 text-white bg-brand rounded-full shadow-lg transform translate-x-1/2"
                onclick="plusDivs(1)">
                ❯
            </button>
        </div>
    </div>

</div>

{% endblock %}