{% load static %}

<footer class="fixed inset-x-0 bottom-0 z-50 md:hidden">
  <nav
    class="mx-3 mb-[calc(0.75rem+env(safe-area-inset-bottom))] rounded-2xl border border-gray-200 bg-white/70 backdrop-blur-xl shadow-2xl ring-1 ring-black/5"
    role="navigation" aria-label="Navigation publique mobile">
    <ul class="grid grid-cols-4">
      {% with current=request.resolver_match.url_name %}

      {# Search #}
      <li>
        <a href="{% url 'researched_traject' %}"
           class="relative flex items-center justify-center py-3 min-h-[60px] transition
                  {% if current == 'researched_traject' %}text-brand{% else %}text-gray-500 hover:text-brand{% endif %}"
           {% if current == 'researched_traject' %}aria-current="page"{% endif %}>
          <span class="grid place-items-center h-10 w-10 rounded-full transition
                       {% if current == 'researched_traject' %}bg-brand/15 ring-1 ring-brand/30{% else %}bg-transparent{% endif %}">
            <!-- loupe -->
            <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
              <circle cx="11" cy="11" r="7" stroke-width="2"/>
              <path d="M20 20l-3.5-3.5" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="sr-only">Search</span>
        </a>
      </li>

      {# Propose #}
      <li>
        <a href="{% url 'proposed_traject' %}"
           class="relative flex items-center justify-center py-3 min-h-[60px] transition
                  {% if current == 'proposed_traject' %}text-brand{% else %}text-gray-500 hover:text-brand{% endif %}"
           {% if current == 'proposed_traject' %}aria-current="page"{% endif %}>
          <span class="grid place-items-center h-10 w-10 rounded-full transition
                       {% if current == 'proposed_traject' %}bg-brand/15 ring-1 ring-brand/30{% else %}bg-transparent{% endif %}">
            <!-- plus -->
            <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
              <path d="M12 5v14M5 12h14" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="sr-only">Propose</span>
        </a>
      </li>

      {# Login / Profile #}
      <li>
        {% if user.is_authenticated %}
          <a href="{% url 'accounts:profile' %}"
             class="relative flex items-center justify-center py-3 min-h-[60px] transition
                    {% if current == 'profile' %}text-brand{% else %}text-gray-500 hover:text-brand{% endif %}"
             {% if current == 'profile' %}aria-current="page"{% endif %}>
            <span class="grid place-items-center h-10 w-10 rounded-full transition
                         {% if current == 'profile' %}bg-brand/15 ring-1 ring-brand/30{% else %}bg-transparent{% endif %}">
              <!-- user -->
              <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                <circle cx="12" cy="8" r="4" stroke-width="2"/>
                <path d="M6 20a6 6 0 0112 0" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            <span class="sr-only">Profil</span>
          </a>
        {% else %}
          <a href="{% url 'account_login' %}"
             class="relative flex items-center justify-center py-3 min-h-[60px] transition
                    {% if current == 'account_login' %}text-brand{% else %}text-gray-500 hover:text-brand{% endif %}"
             {% if current == 'account_login' %}aria-current="page"{% endif %}>
            <span class="grid place-items-center h-10 w-10 rounded-full transition
                         {% if current == 'account_login' %}bg-brand/15 ring-1 ring-brand/30{% else %}bg-transparent{% endif %}">
              <!-- login arrow -->
              <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                <path d="M15 12H3m6-6l-6 6 6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M21 16V8a2 2 0 00-2-2h-4" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            <span class="sr-only">Login</span>
          </a>
        {% endif %}
      </li>

      {# Contact (ic√¥ne enveloppe, pas de loupe) #}
      <li>
        <a href="{% url 'contact' %}"
           class="relative flex items-center justify-center py-3 min-h-[60px] transition
                  {% if current == 'contact' %}text-brand{% else %}text-gray-500 hover:text-brand{% endif %}"
           {% if current == 'contact' %}aria-current="page"{% endif %}>
          <span class="grid place-items-center h-10 w-10 rounded-full transition
                       {% if current == 'contact' %}bg-brand/15 ring-1 ring-brand/30{% else %}bg-transparent{% endif %}">
            <!-- envelope -->
            <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
              <rect x="3" y="5" width="18" height="14" rx="2" stroke-width="2"/>
              <path d="M3 7l9 6 9-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="sr-only">Contact</span>
        </a>
      </li>

      {% endwith %}
    </ul>
  </nav>
</footer>
