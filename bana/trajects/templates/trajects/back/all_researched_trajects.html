{% extends 'layouts/base.html' %}

{% block title %}Trajet demandé - BanaCommunity{% endblock %}

{% block content %}

{% include "/home/bana_community/banaProject/bana/accounts/templates/account/profile/nav_profile.html" %}

<div class="bg-gray-100 min-h-screen p-6">
  <div class="container mx-auto">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">🔍 Trajets recherchés</h2>

    <ul class="flex border-b border-gray-300">
      <li class="mr-4">
        <a href="{% url 'researched_traject' %}"
          class="inline-block px-4 py-2 text-gray-600 hover:text-indigo-600 hover:border-b-2 hover:border-indigo-400 transition">
          Rechercher un trajet
        </a>
      </li>
      <li class="mr-4">
        <a href="{% url 'all_researched_trajects' %}"
          class="inline-block px-4 py-2 text-gray-700 font-medium border-b-2 border-indigo-600">
          Mes demandes de trajets
        </a>
      </li>
      <li>
        <a href="#"
          class="inline-block px-4 py-2 text-gray-600 hover:text-indigo-600 hover:border-b-2 hover:border-indigo-400 transition">
          Mes matchings
        </a>
      </li>
    </ul>

    {% if researched_trajects %}
    <ul class="space-y-4">
      {% for researched in researched_trajects %}
      <li class="bg-white shadow-md rounded-lg p-4 flex justify-between items-center">
        <div>
          <h3 class="text-xl font-semibold text-gray-700">
            {{ researched.user.first_name }} {{ researched.user.last_name }}
          </h3>
          <p class="text-gray-600">
            <strong>Adresse de départ:</strong>
            {{ researched.traject.start_adress }} |
            {{ researched.traject.start_locality }},
            {{ researched.traject.start_cp }}

          </p>
          <p class="text-gray-600">
            <strong>Adresse de destination:</strong>
            {{ researched.traject.end_adress }} |
            {{ researched.traject.end_locality }},
            {{ researched.traject.end_cp }}
          </p>
          <p class="text-gray-600"><strong>Date: </strong>{{ researched.date|date:"l j F Y" }}</p>
          <p class="text-gray-600"><strong>Heure:</strong> {{ researched.departure_time }} → {{ researched.arrival_time }}</p>
          <p class="text-gray-600"><strong>Moyens de
              transport:</strong> {{ researched.transport_modes.all|join:", " }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>
    <div class="pagination mt-4">
      {{ researched_trajects.paginator.page_range|join:" " }}
    </div>
    {% else %}
    <p class="text-gray-600">Aucun trajet recherché trouvé.</p>
    {% endif %}
  </div>
</div>
{% endblock %}